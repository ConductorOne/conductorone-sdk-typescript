/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import { SpeakeasyBase, SpeakeasyMetadata } from "../../../internal/utils";
import { AcceptInstance } from "./acceptinstance";
import { ApprovalInstance } from "./approvalinstance";
import { ProvisionInstance } from "./provisioninstance";
import { RejectInstance } from "./rejectinstance";
import { Expose, Type } from "class-transformer";

/**
 * The state of the step, which is either active or done.
 */
export enum PolicyStepInstanceState {
    PolicyStepStateUnspecified = "POLICY_STEP_STATE_UNSPECIFIED",
    PolicyStepStateActive = "POLICY_STEP_STATE_ACTIVE",
    PolicyStepStateDone = "POLICY_STEP_STATE_DONE",
}

/**
 * The policy step instance includes a reference to an instance of a policy step that tracks state and has a unique ID.
 *
 * @remarks
 *
 * This message contains a oneof named instance. Only a single field of the following list may be set at a time:
 *   - approval
 *   - provision
 *   - accept
 *   - reject
 *
 */
export class PolicyStepInstance extends SpeakeasyBase {
    /**
     * This policy step indicates that a ticket should have an approved outcome. This is a terminal approval state and is used to explicitly define the end of approval steps.
     *
     * @remarks
     *  The instance is just a marker for it being copied into an active policy.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "accept" })
    @Type(() => AcceptInstance)
    acceptInstance?: AcceptInstance;

    /**
     * The approval instance object describes the way a policy step should be approved as well as its outcomes and state.
     *
     * @remarks
     *
     * This message contains a oneof named outcome. Only a single field of the following list may be set at a time:
     *   - approved
     *   - denied
     *   - reassigned
     *   - restarted
     *   - reassignedByError
     *
     */
    @SpeakeasyMetadata()
    @Expose({ name: "approval" })
    @Type(() => ApprovalInstance)
    approvalInstance?: ApprovalInstance;

    /**
     * A provision instance describes the specific configuration of an executing provision policy step including actions taken and notification id.
     *
     * @remarks
     *
     * This message contains a oneof named outcome. Only a single field of the following list may be set at a time:
     *   - completed
     *   - cancelled
     *   - errored
     *   - reassignedByError
     *
     */
    @SpeakeasyMetadata()
    @Expose({ name: "provision" })
    @Type(() => ProvisionInstance)
    provisionInstance?: ProvisionInstance;

    /**
     * This policy step indicates that a ticket should have a denied outcome. This is a terminal approval state and is used to explicitly define the end of approval steps.
     *
     * @remarks
     *  The instance is just a marker for it being copied into an active policy.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "reject" })
    @Type(() => RejectInstance)
    rejectInstance?: RejectInstance;

    /**
     * The ID of the PolicyStepInstance. This is required by many action submission endpoints to indicate what step you're approving.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "id" })
    id?: string;

    /**
     * The policy generation id refers to the version of the policy that this step was created from.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "policyGenerationId" })
    policyGenerationId?: string;

    /**
     * The state of the step, which is either active or done.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "state" })
    state?: PolicyStepInstanceState;
}
