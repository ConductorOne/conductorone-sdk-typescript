/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../../lib/primitives.js";
import { safeParse } from "../../../lib/schemas.js";
import * as openEnums from "../../types/enums.js";
import { OpenEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import {
  Action,
  Action$inboundSchema,
  Action$Outbound,
  Action$outboundSchema,
} from "./action.js";
import {
  ActionOutcomeCancelled,
  ActionOutcomeCancelled$inboundSchema,
  ActionOutcomeCancelled$Outbound,
  ActionOutcomeCancelled$outboundSchema,
} from "./actionoutcomecancelled.js";
import {
  ActionOutcomeDenied,
  ActionOutcomeDenied$inboundSchema,
  ActionOutcomeDenied$Outbound,
  ActionOutcomeDenied$outboundSchema,
} from "./actionoutcomedenied.js";
import {
  ActionOutcomeError,
  ActionOutcomeError$inboundSchema,
  ActionOutcomeError$Outbound,
  ActionOutcomeError$outboundSchema,
} from "./actionoutcomeerror.js";
import {
  ActionOutcomeSuccess,
  ActionOutcomeSuccess$inboundSchema,
  ActionOutcomeSuccess$Outbound,
  ActionOutcomeSuccess$outboundSchema,
} from "./actionoutcomesuccess.js";
import {
  ActionTargetAutomationInstance,
  ActionTargetAutomationInstance$inboundSchema,
  ActionTargetAutomationInstance$Outbound,
  ActionTargetAutomationInstance$outboundSchema,
} from "./actiontargetautomationinstance.js";

/**
 * The current state of the action execution.
 */
export const ActionInstanceState = {
  ActionInstanceStateUnspecified: "ACTION_INSTANCE_STATE_UNSPECIFIED",
  ActionInstanceStateInit: "ACTION_INSTANCE_STATE_INIT",
  ActionInstanceStateRunning: "ACTION_INSTANCE_STATE_RUNNING",
  ActionInstanceStateDone: "ACTION_INSTANCE_STATE_DONE",
  ActionInstanceStateError: "ACTION_INSTANCE_STATE_ERROR",
} as const;
/**
 * The current state of the action execution.
 */
export type ActionInstanceState = OpenEnum<typeof ActionInstanceState>;

/**
 * The ActionInstance message.
 *
 * @remarks
 *
 * This message contains a oneof named target_instance. Only a single field of the following list may be set at a time:
 *   - automation
 *
 * This message contains a oneof named outcome. Only a single field of the following list may be set at a time:
 *   - success
 *   - denied
 *   - error
 *   - cancelled
 */
export type ActionInstance = {
  /**
   * The Action message.
   *
   * @remarks
   *
   * This message contains a oneof named target. Only a single field of the following list may be set at a time:
   *   - automation
   */
  action?: Action | null | undefined;
  /**
   * The ActionTargetAutomationInstance message.
   */
  actionTargetAutomationInstance?:
    | ActionTargetAutomationInstance
    | null
    | undefined;
  /**
   * The ActionOutcomeCancelled message.
   */
  actionOutcomeCancelled?: ActionOutcomeCancelled | null | undefined;
  /**
   * The ActionOutcomeDenied message.
   */
  actionOutcomeDenied?: ActionOutcomeDenied | null | undefined;
  /**
   * The ActionOutcomeError message.
   */
  actionOutcomeError?: ActionOutcomeError | null | undefined;
  /**
   * The current state of the action execution.
   */
  state?: ActionInstanceState | undefined;
  /**
   * The ActionOutcomeSuccess message.
   */
  actionOutcomeSuccess?: ActionOutcomeSuccess | null | undefined;
};

/** @internal */
export const ActionInstanceState$inboundSchema: z.ZodType<
  ActionInstanceState,
  z.ZodTypeDef,
  unknown
> = openEnums.inboundSchema(ActionInstanceState);
/** @internal */
export const ActionInstanceState$outboundSchema: z.ZodType<
  string,
  z.ZodTypeDef,
  ActionInstanceState
> = openEnums.outboundSchema(ActionInstanceState);

/** @internal */
export const ActionInstance$inboundSchema: z.ZodType<
  ActionInstance,
  z.ZodTypeDef,
  unknown
> = z.object({
  action: z.nullable(Action$inboundSchema).optional(),
  automation: z.nullable(ActionTargetAutomationInstance$inboundSchema)
    .optional(),
  cancelled: z.nullable(ActionOutcomeCancelled$inboundSchema).optional(),
  denied: z.nullable(ActionOutcomeDenied$inboundSchema).optional(),
  error: z.nullable(ActionOutcomeError$inboundSchema).optional(),
  state: ActionInstanceState$inboundSchema.optional(),
  success: z.nullable(ActionOutcomeSuccess$inboundSchema).optional(),
}).transform((v) => {
  return remap$(v, {
    "automation": "actionTargetAutomationInstance",
    "cancelled": "actionOutcomeCancelled",
    "denied": "actionOutcomeDenied",
    "error": "actionOutcomeError",
    "success": "actionOutcomeSuccess",
  });
});
/** @internal */
export type ActionInstance$Outbound = {
  action?: Action$Outbound | null | undefined;
  automation?: ActionTargetAutomationInstance$Outbound | null | undefined;
  cancelled?: ActionOutcomeCancelled$Outbound | null | undefined;
  denied?: ActionOutcomeDenied$Outbound | null | undefined;
  error?: ActionOutcomeError$Outbound | null | undefined;
  state?: string | undefined;
  success?: ActionOutcomeSuccess$Outbound | null | undefined;
};

/** @internal */
export const ActionInstance$outboundSchema: z.ZodType<
  ActionInstance$Outbound,
  z.ZodTypeDef,
  ActionInstance
> = z.object({
  action: z.nullable(Action$outboundSchema).optional(),
  actionTargetAutomationInstance: z.nullable(
    ActionTargetAutomationInstance$outboundSchema,
  ).optional(),
  actionOutcomeCancelled: z.nullable(ActionOutcomeCancelled$outboundSchema)
    .optional(),
  actionOutcomeDenied: z.nullable(ActionOutcomeDenied$outboundSchema)
    .optional(),
  actionOutcomeError: z.nullable(ActionOutcomeError$outboundSchema).optional(),
  state: ActionInstanceState$outboundSchema.optional(),
  actionOutcomeSuccess: z.nullable(ActionOutcomeSuccess$outboundSchema)
    .optional(),
}).transform((v) => {
  return remap$(v, {
    actionTargetAutomationInstance: "automation",
    actionOutcomeCancelled: "cancelled",
    actionOutcomeDenied: "denied",
    actionOutcomeError: "error",
    actionOutcomeSuccess: "success",
  });
});

export function actionInstanceToJSON(actionInstance: ActionInstance): string {
  return JSON.stringify(ActionInstance$outboundSchema.parse(actionInstance));
}
export function actionInstanceFromJSON(
  jsonString: string,
): SafeParseResult<ActionInstance, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ActionInstance$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ActionInstance' from JSON`,
  );
}
