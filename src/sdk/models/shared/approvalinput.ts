/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { safeParse } from "../../../lib/schemas.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import {
  AgentApproval,
  AgentApproval$inboundSchema,
  AgentApproval$Outbound,
  AgentApproval$outboundSchema,
} from "./agentapproval.js";
import {
  AppGroupApproval,
  AppGroupApproval$inboundSchema,
  AppGroupApproval$Outbound,
  AppGroupApproval$outboundSchema,
} from "./appgroupapproval.js";
import {
  AppOwnerApproval,
  AppOwnerApproval$inboundSchema,
  AppOwnerApproval$Outbound,
  AppOwnerApproval$outboundSchema,
} from "./appownerapproval.js";
import {
  EntitlementOwnerApproval,
  EntitlementOwnerApproval$inboundSchema,
  EntitlementOwnerApproval$Outbound,
  EntitlementOwnerApproval$outboundSchema,
} from "./entitlementownerapproval.js";
import {
  Escalation,
  Escalation$inboundSchema,
  Escalation$Outbound,
  Escalation$outboundSchema,
} from "./escalation.js";
import {
  ExpressionApprovalInput,
  ExpressionApprovalInput$inboundSchema,
  ExpressionApprovalInput$Outbound,
  ExpressionApprovalInput$outboundSchema,
} from "./expressionapprovalinput.js";
import {
  ManagerApprovalInput,
  ManagerApprovalInput$inboundSchema,
  ManagerApprovalInput$Outbound,
  ManagerApprovalInput$outboundSchema,
} from "./managerapprovalinput.js";
import {
  ResourceOwnerApproval,
  ResourceOwnerApproval$inboundSchema,
  ResourceOwnerApproval$Outbound,
  ResourceOwnerApproval$outboundSchema,
} from "./resourceownerapproval.js";
import {
  SelfApprovalInput,
  SelfApprovalInput$inboundSchema,
  SelfApprovalInput$Outbound,
  SelfApprovalInput$outboundSchema,
} from "./selfapprovalinput.js";
import {
  UserApproval,
  UserApproval$inboundSchema,
  UserApproval$Outbound,
  UserApproval$outboundSchema,
} from "./userapproval.js";
import {
  WebhookApproval,
  WebhookApproval$inboundSchema,
  WebhookApproval$Outbound,
  WebhookApproval$outboundSchema,
} from "./webhookapproval.js";

/**
 * The Approval message.
 *
 * @remarks
 *
 * This message contains a oneof named typ. Only a single field of the following list may be set at a time:
 *   - users
 *   - manager
 *   - appOwners
 *   - group
 *   - self
 *   - entitlementOwners
 *   - expression
 *   - webhook
 *   - resourceOwners
 *   - agent
 */
export type ApprovalInput = {
  agent?: AgentApproval | null | undefined;
  /**
   * Whether ticket delegation is allowed for this step.
   */
  allowDelegation?: boolean | null | undefined;
  /**
   * Configuration to allow reassignment by reviewers during this step.
   */
  allowReassignment?: boolean | null | undefined;
  /**
   * List of users for whom this step can be reassigned.
   */
  allowedReassignees?: Array<string> | null | undefined;
  appOwners?: AppOwnerApproval | null | undefined;
  entitlementOwners?: EntitlementOwnerApproval | null | undefined;
  escalation?: Escalation | null | undefined;
  /**
   * Whether escalation is enabled for this step.
   */
  escalationEnabled?: boolean | null | undefined;
  expression?: ExpressionApprovalInput | null | undefined;
  group?: AppGroupApproval | null | undefined;
  manager?: ManagerApprovalInput | null | undefined;
  /**
   * Configuration to require a reason when approving this step.
   */
  requireApprovalReason?: boolean | null | undefined;
  /**
   * Configuration to require a reason when denying this step.
   */
  requireDenialReason?: boolean | null | undefined;
  /**
   * Configuration to require a reason when reassigning this step.
   */
  requireReassignmentReason?: boolean | null | undefined;
  /**
   * The ID of a step-up authentication provider that will be required for approvals on this step.
   *
   * @remarks
   *  If set, approvers must complete the step-up authentication flow before they can approve.
   */
  requiresStepUpProviderId?: string | null | undefined;
  resourceOwners?: ResourceOwnerApproval | null | undefined;
  self?: SelfApprovalInput | null | undefined;
  users?: UserApproval | null | undefined;
  webhook?: WebhookApproval | null | undefined;
};

/** @internal */
export const ApprovalInput$inboundSchema: z.ZodType<
  ApprovalInput,
  z.ZodTypeDef,
  unknown
> = z.object({
  agent: z.nullable(AgentApproval$inboundSchema).optional(),
  allowDelegation: z.nullable(z.boolean()).optional(),
  allowReassignment: z.nullable(z.boolean()).optional(),
  allowedReassignees: z.nullable(z.array(z.string())).optional(),
  appOwners: z.nullable(AppOwnerApproval$inboundSchema).optional(),
  entitlementOwners: z.nullable(EntitlementOwnerApproval$inboundSchema)
    .optional(),
  escalation: z.nullable(Escalation$inboundSchema).optional(),
  escalationEnabled: z.nullable(z.boolean()).optional(),
  expression: z.nullable(ExpressionApprovalInput$inboundSchema).optional(),
  group: z.nullable(AppGroupApproval$inboundSchema).optional(),
  manager: z.nullable(ManagerApprovalInput$inboundSchema).optional(),
  requireApprovalReason: z.nullable(z.boolean()).optional(),
  requireDenialReason: z.nullable(z.boolean()).optional(),
  requireReassignmentReason: z.nullable(z.boolean()).optional(),
  requiresStepUpProviderId: z.nullable(z.string()).optional(),
  resourceOwners: z.nullable(ResourceOwnerApproval$inboundSchema).optional(),
  self: z.nullable(SelfApprovalInput$inboundSchema).optional(),
  users: z.nullable(UserApproval$inboundSchema).optional(),
  webhook: z.nullable(WebhookApproval$inboundSchema).optional(),
});

/** @internal */
export type ApprovalInput$Outbound = {
  agent?: AgentApproval$Outbound | null | undefined;
  allowDelegation?: boolean | null | undefined;
  allowReassignment?: boolean | null | undefined;
  allowedReassignees?: Array<string> | null | undefined;
  appOwners?: AppOwnerApproval$Outbound | null | undefined;
  entitlementOwners?: EntitlementOwnerApproval$Outbound | null | undefined;
  escalation?: Escalation$Outbound | null | undefined;
  escalationEnabled?: boolean | null | undefined;
  expression?: ExpressionApprovalInput$Outbound | null | undefined;
  group?: AppGroupApproval$Outbound | null | undefined;
  manager?: ManagerApprovalInput$Outbound | null | undefined;
  requireApprovalReason?: boolean | null | undefined;
  requireDenialReason?: boolean | null | undefined;
  requireReassignmentReason?: boolean | null | undefined;
  requiresStepUpProviderId?: string | null | undefined;
  resourceOwners?: ResourceOwnerApproval$Outbound | null | undefined;
  self?: SelfApprovalInput$Outbound | null | undefined;
  users?: UserApproval$Outbound | null | undefined;
  webhook?: WebhookApproval$Outbound | null | undefined;
};

/** @internal */
export const ApprovalInput$outboundSchema: z.ZodType<
  ApprovalInput$Outbound,
  z.ZodTypeDef,
  ApprovalInput
> = z.object({
  agent: z.nullable(AgentApproval$outboundSchema).optional(),
  allowDelegation: z.nullable(z.boolean()).optional(),
  allowReassignment: z.nullable(z.boolean()).optional(),
  allowedReassignees: z.nullable(z.array(z.string())).optional(),
  appOwners: z.nullable(AppOwnerApproval$outboundSchema).optional(),
  entitlementOwners: z.nullable(EntitlementOwnerApproval$outboundSchema)
    .optional(),
  escalation: z.nullable(Escalation$outboundSchema).optional(),
  escalationEnabled: z.nullable(z.boolean()).optional(),
  expression: z.nullable(ExpressionApprovalInput$outboundSchema).optional(),
  group: z.nullable(AppGroupApproval$outboundSchema).optional(),
  manager: z.nullable(ManagerApprovalInput$outboundSchema).optional(),
  requireApprovalReason: z.nullable(z.boolean()).optional(),
  requireDenialReason: z.nullable(z.boolean()).optional(),
  requireReassignmentReason: z.nullable(z.boolean()).optional(),
  requiresStepUpProviderId: z.nullable(z.string()).optional(),
  resourceOwners: z.nullable(ResourceOwnerApproval$outboundSchema).optional(),
  self: z.nullable(SelfApprovalInput$outboundSchema).optional(),
  users: z.nullable(UserApproval$outboundSchema).optional(),
  webhook: z.nullable(WebhookApproval$outboundSchema).optional(),
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace ApprovalInput$ {
  /** @deprecated use `ApprovalInput$inboundSchema` instead. */
  export const inboundSchema = ApprovalInput$inboundSchema;
  /** @deprecated use `ApprovalInput$outboundSchema` instead. */
  export const outboundSchema = ApprovalInput$outboundSchema;
  /** @deprecated use `ApprovalInput$Outbound` instead. */
  export type Outbound = ApprovalInput$Outbound;
}

export function approvalInputToJSON(approvalInput: ApprovalInput): string {
  return JSON.stringify(ApprovalInput$outboundSchema.parse(approvalInput));
}

export function approvalInputFromJSON(
  jsonString: string,
): SafeParseResult<ApprovalInput, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ApprovalInput$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ApprovalInput' from JSON`,
  );
}
